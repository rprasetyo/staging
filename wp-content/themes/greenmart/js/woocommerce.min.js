!function(t){"use strict";var a=null;function e(t,a,e){var r=new Date;r.setTime(r.getTime()+24*e*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=t+"="+a+"; "+i+";path=/"}function r(t){for(var a=t+"=",e=document.cookie.split(";"),r=0;r<e.length;r++){for(var i=e[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(a))return i.substring(a.length,i.length)}return""}jQuery("body").on("adding_to_cart",function(t,e,r){a=r}),jQuery(document).ready(function(){jQuery("body").hasClass("tbay-disable-ajax-popup-cart")||jQuery("body").on("added_to_cart",function(t,e){if(void 0===a.page){jQuery("#tbay-cart-modal").modal();var r=greenmart_ajax.ajaxurl+"?action=greenmart_add_to_cart_product&product_id="+a.product_id;jQuery.get(r,function(t,a){jQuery("#tbay-cart-modal .modal-body .modal-body-content").html(t)}),jQuery("#tbay-cart-modal").on("hidden.bs.modal",function(){jQuery(this).find(".modal-body .modal-body-content").empty()})}}),t("#productvideo").tbayIframe(),t(document).on("added_to_wishlist removed_from_wishlist",function(){var a=t(".count_wishlist");t.ajax({url:yith_wcwl_l10n.ajax_url,data:{action:"yith_wcwl_update_wishlist_count"},dataType:"json",success:function(t){a.html(t.count)},beforeSend:function(){a.block()},complete:function(){a.unblock()}})}),t(document).on("click",".mini_cart_content a.remove",function(a){a.preventDefault();var e=t(this).attr("data-product_id"),r=t(this).attr("data-cart_item_key"),i=t(this).parents(".mini_cart_item"),d=t(this).closest(".widget_shopping_cart_content");i.block({message:null,overlayCSS:{cursor:"none"}}),t.ajax({type:"POST",dataType:"json",url:wc_add_to_cart_params.ajax_url,data:{action:"product_remove",product_id:e,cart_item_key:r},beforeSend:function(){d.find(".mini_cart_content").append('<div class="ajax-loader-wapper"><div class="ajax-loader"></div></div>'),d.find(".mini_cart_content").fadeTo("slow",.3),a.stopPropagation()},success:function(a){if(a&&!a.error){var r=a.fragments;r&&t.each(r,function(a,e){t(a).replaceWith(e)}),t(".add_to_cart_button.added").each(function(a){t(this).data("product_id")==e&&(t(this).removeClass("added"),t(this).next(".wc-forward").remove())})}}})})}),t(document).on("click",".single_add_to_cart_button",function(a){if(!greenmart_settings.ajax_single_add_to_cart)return;if(t(this).closest("form.cart").find('input[name="greenmart_buy_now"]').length>0&&"1"===t(this).closest("form.cart").find('input[name="greenmart_buy_now"]').val())return;let e=t(this),r=e.closest("form.cart");if(r.hasClass("grouped_form")||0==r.find("input[name=quantity]").length)return;let i=e.val(),d=r.find("input[name=quantity]").val()||1,n=r.find("input[name=product_id]").val()||i,o=r.find("input[name=variation_id]").val()||0;if(n&&!e.is(".disabled")){a.preventDefault();var s={action:"woocommerce_ajax_add_to_cart",page:"single",product_id:n,product_sku:"",quantity:d,variation_id:o};return t(document.body).trigger("adding_to_cart",[e,s]),t.ajax({type:"post",url:wc_add_to_cart_params.ajax_url,data:s,beforeSend:function(t){e.removeClass("added").addClass("loading")},complete:function(t){e.addClass("added").removeClass("loading")},success:function(a){a.error&a.product_url?window.location=a.product_url:(t(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,e]),t(".woocommerce-notices-wrapper").empty().append(a.notices))}}),!1}}),t(document).on("click",".plus, .minus",function(){var a=t(this).closest(".quantity").find(".qty"),e=parseFloat(a.val()),r=a.data("max"),i=a.data("min"),d=a.data("step");e&&""!==e&&"NaN"!==e||(e=0),""!==r&&"NaN"!==r||(r=""),""!==i&&"NaN"!==i||(i=0),"any"!==d&&""!==d&&void 0!==d&&"NaN"!==parseFloat(d)||(d=1),t(this).is(".plus")?r&&(r==e||e>r)?a.val(r):a.val(e+parseFloat(d)):i&&(i==e||e<i)?a.val(i).trigger("change"):e>0&&a.val(e-parseFloat(d)),a.change()}),t('.tbay-body-woocommerce-quantity-mod .quantity input[type="number"]').change(function(){var a=parseFloat(t(this).val()),e=t(this).data("max"),r=t(this).data("min");a<r?(t(this).val(r),t(this).change()):""!=e&&a>e&&(t(this).val(e),t(this).change()),jQuery(this).parents(".product-content").find(".add_to_cart_button").attr("data-quantity",a)}),t(".thumbnails-image .thumb-link").on("click",function(a){a.preventDefault();var e=t(this).attr("href"),r=t(this).data("image");t(".woocommerce-main-image .featured-image").attr("href",r),t(".woocommerce-main-image .featured-image img").attr("src",e),t(".cloud-zoom").CloudZoom()}),t("body").on("click",".tbay-buy-now",function(a){a.preventDefault();let e=t(this).closest("form.cart"),r=e.find('[type="submit"]'),i=e.find('input[name="greenmart_buy_now"]');r.is(".disabled")?r.trigger("click"):(i.val("1"),e.find(".single_add_to_cart_button").click())}),t(document.body).on("check_variations",function(){t("form.cart").find('[type="submit"]').is(".disabled")?t(".tbay-buy-now").addClass("disabled"):t(".tbay-buy-now").removeClass("disabled")}),t.fn.tbayIframe=function(a){var e=this,r=t.extend({classBtn:".tbay-modalButton",defaultW:640,defaultH:360},a);return t(r.classBtn).on("click",function(a){var i=t(this).attr("data-tbayVideoFullscreen")||!1,d={src:t(this).attr("data-tbaySrc"),height:t(this).attr("data-tbayHeight")||r.defaultH,width:t(this).attr("data-tbayWidth")||r.defaultW};i&&(d.allowfullscreen=""),t(e).find("iframe").attr(d)}),this.on("hidden.bs.modal",function(){t(this).find("iframe").html("").attr("src","")}),this},t(document).on("click","#display-mode-grid",function(a){return a.preventDefault(),t(a.currentTarget).addClass("active").next().removeClass("active"),e("display_mode","grid",.1),t(a.currentTarget).parents("#primary").find("div.products").hasClass("products-grid")||(t(a.currentTarget).parents("#primary").find("div.products").fadeOut(0,function(){t(this).addClass("products-grid").removeClass("products-list").fadeIn(300)}),t(a.currentTarget).parents("#primary").find("div.products").find(".product-block").removeClass("list").fadeIn(300).addClass("grid")),!1}),t(document).on("click","#display-mode-list",function(a){return a.preventDefault(),t(a.currentTarget).addClass("active").prev().removeClass("active"),e("display_mode","list",.1),t(a.currentTarget).parents("#primary").find("div.products").hasClass("products-list")||(t(a.currentTarget).parents("#primary").find("div.products").fadeOut(0,function(){t(this).addClass("products-list").removeClass("products-grid").fadeIn(300)}),t(a.currentTarget).parents("#primary").find("div.products").find(".product-block").removeClass("grid").fadeIn(300).addClass("list")),!1}),void 0!=r("display_mode")&&("grid"==r("display_mode")&&(t(".tbay-filter").next("div.products").removeClass("products-list").fadeIn(300),t(".display-mode-warpper").find("#display-mode-grid").addClass("active").next().removeClass("active"),t(".tbay-filter").parents("#primary").find("div.products").find(".product-block").removeClass("list").fadeIn(300).addClass("grid")),"list"==r("display_mode")&&(t(".tbay-filter").parents("#primary").find("div.products").removeClass("products-grid").fadeIn(300),t(".display-mode-warpper").find("#display-mode-list").addClass("active").prev().removeClass("active"),t(".tbay-filter").parents("#primary").find("div.products").find(".product-block").removeClass("grid").fadeIn(300).addClass("list")),t(".tbay-filter").parents("#primary").find("div.products").addClass("products-"+r("display_mode")))}(jQuery);