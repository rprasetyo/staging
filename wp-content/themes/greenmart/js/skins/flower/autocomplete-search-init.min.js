!function(e){"use strict";jQuery(document).ready(function(e){e("input[name='s']").on("focus",function(){var a=void 0!==jQuery(this).parents("form").data("appendto")?jQuery(this).parents("form").data("appendto"):"";e(this).autocomplete({source:function(a,t){e.ajax({url:greenmart_ajax.ajaxurl+"?callback=?&action=greenmart_autocomplete_search",dataType:"json",data:{term:a.term,category:this.element.parent().find(".dropdown_product_cat").val(),style:this.element.data("style"),post_type:this.element.parent().find(".post_type").val()},success:function(e,a,r){t(e)}})},minLength:2,appendTo:a,autoFocus:!0,search:function(a,t){e(a.currentTarget).parents(".tbay-search-form").addClass("load")},select:function(e,a){window.location.href=a.item.link},create:function(){e(this).data("ui-autocomplete")._renderItem=function(a,t){var r="";if(""!=t.image)r='<a class="image" href="'+t.link+'" title="'+t.label+'"><img class="pull-left" src="'+t.image+'" style="margin-right:10px;"></a>';return r+='<div class="group">',r+='<div class="name"><a href="'+t.link+'" title="'+t.label+'">'+t.label+"</a></div>",""!=t.price&&(r+='<div class="price">'+t.price+"</div> "),r+="</div>",e("<li>").append(r).appendTo(a)},jQuery(this).data("ui-autocomplete")._renderMenu=function(a,t){var r=this;jQuery.each(t,function(e,t){r._renderItemData(a,t)}),t[0].view_all?(a.append('<li class="list-header ui-menu-divider">'+t[0].result+"</li>"),a.append('<li class="list-bottom ui-menu-divider"><a class="search-view-all" href="javascript:void(0)">'+greenmart_settings.view_all+"</a></li>")):a.append('<li class="list-header ui-menu-divider">'+t[0].result+"</li>"),e(document.body).trigger("greenmart_search_view_all")}},response:function(a,t){0===t.content.length?(e(".tbay-preloader").text("No results found"),e(".tbay-preloader").addClass("no-results")):(e(".tbay-preloader").empty(),e(".tbay-preloader").removeClass("no-results"))},open:function(a,t){e(a.target).parents(".tbay-search-form").removeClass("load"),e(a.target).parents(".tbay-search-form").addClass("active")},close:function(){}})}),e(document.body).on("greenmart_search_view_all",()=>{e(".search-view-all").on("click",function(){jQuery(this).parents("form").submit()})}),e(".tbay-preloader").on("click",function(){e(this).parents(".tbay-search-form").removeClass("active"),e(this).parents(".tbay-search-form").find("input[name=s]").val("")}),e("input[name=s]").keyup(function(){0==e(this).val().length&&(e(this).parents(".tbay-search-form").removeClass("load"),e(this).parents(".tbay-search-form").removeClass("active"),e(this).parents(".tbay-search-form").find(".tbay-preloader").empty())})})}(jQuery);